<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Grade Calculator</title>
    <style>
        .two-column-layout {
            display: grid;
            grid-template-columns: max-content max-content;
            gap: 0.5em 2em;
        }

        :invalid {
            background-color: red;
        }
    </style>
</head>
<body>
<datalist id="number-list">
    <option>1.0</option>
    <option>1.1</option>
    <option>1.2</option>
    <option>1.3</option>
    <option>1.4</option>
    <option>1.5</option>
    <option>1.6</option>
    <option>1.7</option>
    <option>1.8</option>
    <option>1.9</option>
    <option>2.0</option>
    <option>2.1</option>
    <option>2.2</option>
    <option>2.3</option>
    <option>2.4</option>
    <option>2.5</option>
    <option>2.6</option>
    <option>2.7</option>
    <option>2.8</option>
    <option>2.9</option>
    <option>3.0</option>
    <option>3.1</option>
    <option>3.2</option>
    <option>3.3</option>
    <option>3.4</option>
    <option>3.5</option>
    <option>3.6</option>
    <option>3.7</option>
    <option>2.8</option>
    <option>2.9</option>
    <option>3.0</option>
    <option>3.1</option>
    <option>3.2</option>
    <option>3.3</option>
    <option>3.4</option>
    <option>3.5</option>
    <option>3.6</option>
    <option>3.7</option>
    <option>3.8</option>
    <option>3.9</option>
    <option>4.0</option>
    <option>4.1</option>
    <option>4.2</option>
    <option>4.3</option>
    <option>4.4</option>
    <option>4.5</option>
    <option>4.6</option>
    <option>4.7</option>
    <option>4.8</option>
    <option>4.9</option>
    <option>5.0</option>
    <option>5.1</option>
    <option>5.2</option>
    <option>5.3</option>
    <option>5.4</option>
    <option>5.5</option>
    <option>5.6</option>
    <option>5.7</option>
    <option>5.8</option>
    <option>5.9</option>
    <option>6.0</option>
    <option>6.1</option>
    <option>6.2</option>
    <option>6.3</option>
    <option>6.4</option>
    <option>6.5</option>
    <option>6.6</option>
    <option>6.7</option>
    <option>6.8</option>
    <option>6.9</option>
</datalist>

<div class="two-column-layout">
    <script>
        const calculateAverage = gradeArray => {
            // const gradeAverage = String( (6.0+5.5+5.0) / 3 );
            // const gradeAverage = String( grades.reduce( (acc, cur) => acc + cur, 0) / grades.length );
            let value = gradeArray.reduce( (acc, cur) => acc + cur, 0) / gradeArray.length;
            value = Math.floor( value * 10 ) / 10; //round to 1 decimal after comma
            return value;
        };

        const updateAverage = () => {
            const gradeArray = [ ...document.querySelectorAll('input[id^="module"][id$="grade"]')]
                                .map(it => Number( it.value ));
            // gradeArray.forEach(function (element) {document.writeln(element)});
            const newAverage = calculateAverage(gradeArray);
            document.getElementById("outputGradeAverage").textContent = String( newAverage );
        };

        const writeModuleBlaBla = (moduleId, moduleName, moduleGrade) => {
            document.writeln(`
                <div>
                    <label for="modul-${moduleId}-name"></label>
                    <input  id="modul-${moduleId}-name" type="text" value="${moduleName}">
                </div>
                <div>
                    <label for="modul-${moduleId}-grade"></label>
                    <input  id="modul-${moduleId}-grade" type="number" value="${moduleGrade}"
                            onchange="updateAverage()"
                            list="number-list" step="0.1" required min="1.0" max="6.0">
                </div>
            `);
        };

        writeModuleBlaBla("modul-1", "Web Clients", "6.0");
        writeModuleBlaBla("modul-2", "Web Programming", "5.5");
        writeModuleBlaBla("modul-2", "Web Engineering", "5.0");
    </script>


    <script>
        document.writeln(`
            <div>Durchschnitt</div>
            <div><output id="outputGradeAverage"></output></div>
        `);
        updateAverage();
    </script>
</div>
</body>
</html>